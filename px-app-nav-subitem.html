<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="css/px-app-nav-subitem-styles.html">

<dom-module id="px-app-nav-subitem">
  <template>
    <style include="px-app-nav-subitem-styles"></style>

    <template is="dom-if" if="{{_propIsTypeOf(label, 'string')}}">
      <p class="app-nav-subitem__label">{{label}}</p>
    </template>
  </template>
</dom-module>
<script>
  Polymer({
    is: 'px-app-nav-subitem',

    properties: {
      /**
       * If `true` the item is selected. Watch for updates to find out when the
       * user clicks/taps the item and selects it, or when the item is selected
       * through data binding.
       *
       * Set the attribute to select this item. If you set the attribute to true,
       * any peer items that are currently selected will be deselected.
       */
      selected: {
        type: Boolean,
        value: false,
        notify: true,
        reflectToAttribute: true,
        observer: '_handleSelectedChanged'
      },

      /**
       * Used as the label text for the item.
       */
      label: {
        type: String
      },

      /**
       * A named path for this item. Used to select it programatically, e.g.
       * by binding to the current URL route.
       */
      path: {
        type: String,
        reflectToAttribute: true
      }
    },

    /**
     * Checks if a property is the desired `type`.
     *
     * @param {*} prop
     * @returns {Boolean}
     */
    _propIsTypeOf(prop, type) {
      return prop && type && (typeof prop === type);
    },

    _handleSelectedChanged(nextState, lastState) {
      if (nextState === true) {
        this.fire('px-app-nav-subitem-selected');
      }
      if (nextState === false) {
        this.fire('px-app-nav-subitem-deselected');
      }
    }
  });
</script>
