<link rel="import" href="../polymer/polymer.html"/>
<link rel="import" href="../iron-icon/iron-icon.html"/>
<link rel="import" href="../px-polymer-font-awesome/px-icon-set.html"/>
<link rel="import" href="px-app-nav-behaviors.html"/>
<link rel="import" href="css/px-app-nav-item-styles.html"/>

<dom-module id="px-app-nav-item">
  <template>
    <style include="px-app-nav-item-styles"></style>

    <template is="dom-if" if="{{_propIsTypeOf(icon, 'string')}}">
      <iron-icon class$="app-nav-item__icon {{_addClassIfHasLabel(label)}}" icon="{{icon}}"></iron-icon>
    </template>

    <template is="dom-if" if="{{_propIsTypeOf(label, 'string')}}">
      <p class="app-nav-item__label">{{label}}</p>
    </template>

    <template is="dom-if" if="{{empty}}">
      <div class="app-nav-item__icon app-nav-item__icon--with-label app-nav-item__icon--empty"></div>
      <div class="app-nav-item__label app-nav-item__label--empty"></div>
    </template>

    <template is="dom-if" if="{{dropdown}}">
      <iron-icon class="app-nav-item__dropdown-icon" icon="px:chevron-down"></iron-icon>
    </template>
  </template>
</dom-module>

<script>
  Polymer({
    is: 'px-app-nav-item',

    behaviors: [PxAppNavBehavior.Item],

    properties: {
      /**
       * Used to set the icon for the item.
       */
      icon: {
        type: String
      },

      /**
       * Set to `true` if this is a subitem.
       */
      subitem: {
        type: Boolean,
        value: false,
        reflectToAttribute: true
      },

      /**
       * Shows a dropdown arrow icon to indicate this item can be tapped to
       * open a subgroup.
       */
      dropdown: {
        type: Boolean,
        value: false
      },

      /**
       * Set to `true` if the item is inside a overflowed dropdown.
       */
      overflowed: {
        type: Boolean,
        value: false,
        reflectToAttribute: true,
        observer: 'updateStyles' // Necessary to ensure correct style scoping for iron-icon
      },

      /**
       * Shows an empty state outline for the button instead of a label/icon.
       */
      empty: {
        type: Boolean,
        value: false,
        reflectToAttribute: true
      }
    },

    /**
     * If an item has an icon and a label, get class to add margin between them.
     */
    _addClassIfHasLabel(labelStr) {
      return (typeof labelStr === 'string' && labelStr.length) ? 'app-nav-item__icon--with-label' : '';
    }
  });
</script>
